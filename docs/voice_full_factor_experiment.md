# Полнофакторный эксперимент для офлайн-голосового ввода

## Цель
Выбрать устойчивый к шуму офлайн-обработчик речи для полевого сценария (взрывы, крики, быстрая речь) при заполнении медицинской формы.

## Факторы и уровни (2^5)
1. `A` — источник аудио:
   - `A1`: `MIC`
   - `A2`: `VOICE_RECOGNITION`
2. `B` — грамматика команд:
   - `B1`: выключена
   - `B2`: включена (ограниченный словарь полей)
3. `C` — режим распознавания:
   - `C1`: один свободный режим
   - `C2`: двухрежимный FSM (`команда -> значение`)
4. `D` — агрессивность VAD:
   - `D1`: `AGGRESSIVE`
   - `D2`: `VERY_AGGRESSIVE`
5. `E` — пост-обработка команд:
   - `E1`: точное совпадение
   - `E2`: нормализация/синонимы/очистка шума

Итого 32 комбинации.

## Отклик (метрики)
1. Точность команды поля, `%`.
2. Ошибка заполнения поля, `%` (доля полей, попавших не в ту ячейку).
3. `WER` для текстовых полей (ФИО, диагноз).
4. Время полного заполнения формы, секунды.
5. Средняя задержка от конца фразы до обновления поля, мс.

## Рекомендуемый протокол
1. Подготовить датасет полевых записей (чистая речь, шум техники, взрывы, крики).
2. Для каждой комбинации факторов прогнать одинаковый набор аудио.
3. Повторить минимум 3 прогона на каждом устройстве.
4. Рассчитать среднее и доверительные интервалы.

## Выбранная конфигурация (в текущей реализации)
- `A2`: `VOICE_RECOGNITION` (через движок Vosk Android).
- `B2`: включенная грамматика команд.
- `C2`: FSM из двух режимов (`WAIT_COMMAND` / `WAIT_VALUE`).
- `D2`: предусмотрено для WebRTC VAD (подключена зависимость, может быть активирована в отдельном прогоне).
- `E2`: нормализация текста и словарь синонимов команд.

Это обеспечивает устойчивый офлайн-ввод в условиях сильного фонового шума и снижает ошибки маршрутизации данных по полям.
